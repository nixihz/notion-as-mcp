{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "MCP Tools Contract",
  "description": "Tool definitions for Notion MCP Server",
  "type": "object",
  "components": {
    "tool": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9_-]*$",
          "description": "Tool name in snake_case"
        },
        "description": {
          "type": "string",
          "maxLength": 500,
          "description": "Human-readable description"
        },
        "inputSchema": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "object"
            },
            "properties": {
              "type": "object",
              "additionalProperties": {
                "$ref": "#/$defs/propertySchema"
              }
            },
            "required": {
              "type": "array",
              "items": { "type": "string" }
            }
          },
          "required": ["type", "properties"]
        }
      },
      "required": ["name", "description", "inputSchema"]
    },
    "propertySchema": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["string", "number", "boolean", "integer", "array"]
        },
        "description": {
          "type": "string"
        },
        "enum": {
          "type": "array",
          "items": { "type": "string" }
        },
        "default": {}
      },
      "required": ["type"]
    },
    "callRequest": {
      "type": "object",
      "properties": {
        "name": { "type": "string" },
        "arguments": { "type": "object" }
      },
      "required": ["name", "arguments"]
    },
    "callResult": {
      "type": "object",
      "properties": {
        "content": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "type": { "type": "string", "enum": ["text"] },
              "text": { "type": "string" }
            },
            "required": ["type", "text"]
          }
        },
        "isError": { "type": "boolean" }
      },
      "required": ["content"]
    },
    "listResponse": {
      "type": "object",
      "properties": {
        "tools": {
          "type": "array",
          "items": { "$ref": "#/$defs/tool" }
        }
      },
      "required": ["tools"]
    }
  },
  "$defs": {
    "tool": {
      "$ref": "#/$defs/tool"
    },
    "propertySchema": {
      "$ref": "#/$defs/propertySchema"
    }
  },
  "examples": [
    {
      "tools": [
        {
          "name": "calculate",
          "description": "Perform arithmetic calculations",
          "inputSchema": {
            "type": "object",
            "properties": {
              "expression": {
                "type": "string",
                "description": "Mathematical expression, e.g., '2 + 3 * 4'"
              }
            },
            "required": ["expression"]
          }
        },
        {
          "name": "run_shell",
          "description": "Execute shell command",
          "inputSchema": {
            "type": "object",
            "properties": {
              "command": {
                "type": "string",
                "description": "Shell command to execute"
              },
              "timeout": {
                "type": "number",
                "description": "Timeout in seconds",
                "default": 30
              }
            },
            "required": ["command"]
          }
        }
      ]
    }
  ]
}
