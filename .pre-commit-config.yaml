repos:
  # Go tools
  - repo: https://github.com/tekwizely/pre-commit-golang
    rev: v1.0.0-rc.4
    hooks:
      # Go Build
      - id: go-build-mod
        name: go-build-mod
        description: Build go modules
        entry: go build ./...
        language: system
        pass_filenames: false
        always_run: true

      # Go Format
      - id: go-fmt
        name: go-fmt
        description: Format Go code
        entry: gofmt -l -w
        language: system
        types: [go]

      # Go Lint
      - id: golangci-lint
        name: golangci-lint
        description: Run golangci-lint
        entry: golangci-lint run
        language: system
        types: [go]
        pass_filenames: false

      # Go Unit Tests
      - id: go-test-mod
        description: Run go unit tests
        entry: go test ./...
        language: system
        types: [go]
        pass_filenames: false
        always_run: true

  # General hooks
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
      - id: trailing-whitespace
      - id: check-yaml
      - id: check-added-large-files
        args: ["--maxkb=1000"]
      - id: check-merge-conflict
      - id: check-case-conflict
      - id: check-executables-have-shebangs

      # Prevent committing large files
      - id: check-added-large-files
        name: check-added-large-files
        description: Prevent large files from being committed
        args: ["--maxkb=1024"]

      # Check for case conflicts on case-insensitive filesystems
      - id: check-case-conflict
        name: check-case-conflict
        description: Check for case conflicts

      # Check for files that parse as valid python, golang, markdown, yaml
      - id: check-merge-conflict
        name: check-merge-conflict
        description: Check for files that contain merge conflict strings

      # Check executables have shebangs
      - id: check-executables-have-shebangs
        name: check-executables-have-shebangs
        description: Check that executables have shebangs

      # Check that bound executables are not set
      - id: check-shebang-scripts-are-executable
        name: check-shebang-scripts-are-executable
        description: Check that scripts with shebangs are executable

      # Run file formatting checks
      - id: check-yaml
        name: check-yaml
        description: Ensure YAML files are parseable
        files: '\.ya?ml$'

      # End-of-file-fixer
      - id: end-of-file-fixer
        name: end-of-file-fixer
        description: Ensure files end with a newline

      # Remove trailing whitespace
      - id: trailing-whitespace
        name: trailing-whitespace
        description: Remove trailing whitespace
        args: [--markdown-linebreak-ext=md]
